<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>

        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

        <style>
            html, body { height: 100%; margin: 0; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: #050507; }
            /* Canvas sits fixed as a background layer */
            canvas {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                display: block;
                z-index: 0;
            }
            /* Fallback video (created dynamically only when needed) */
            video#fallbackVideo {
                position: fixed;
                inset: 0;
                width: 100vw;
                height: 100vh;
                object-fit: cover;
                z-index: 0;
                image-rendering: pixelated;
                image-rendering: crisp-edges;
                -ms-interpolation-mode: nearest-neighbor;
                background: #000;
            }

            /* Hero area that occupies the first viewport */
            .hero {
                position: relative;
                height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1;
            }

            /* Overlay content centered inside the hero only */
            .overlay {
                position: absolute;
                inset: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
                color: white;
                -webkit-font-smoothing: antialiased;
                pointer-events: none;
            }
            .overlay h1, .overlay p { pointer-events: auto; margin: 0.25rem 0;}
            .overlay h1 {
                font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
                /* font-weight: 800; */
                font-weight: 3000;
                font-size: clamp(2.25rem, 6vw, 4rem);
                /* letter-spacing: 0.06em; */
                letter-spacing: 0.30em;
                margin-bottom: 8px;
                text-transform: none;
                /* color: white; */
                /* move blend to overlay container for reliability */
                /* mix-blend-mode: color-dodge; */
                -webkit-font-smoothing: antialiased;
                text-shadow: none;
            }
            /* Apply blending at the overlay level so text inverts the canvas below */
            .overlay { mix-blend-mode: difference; }
            .overlay p { font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif; font-size: 1.1rem; opacity: 0.95; }

            /* Scroll indicator */
            .scroll-indicator {
                position: absolute;
                left: 50%;
                bottom: 28px;
                transform: translateX(-50%);
                width: 36px;
                height: 56px;
                border-radius: 24px;
                border: 2px solid rgba(255,255,255,0.85);
                display: flex;
                align-items: flex-start;
                justify-content: center;
                padding-top: 8px;
                box-sizing: border-box;
                opacity: 0.95;
                pointer-events: none;
            }
            .scroll-indicator .arrow {
                width: 8px;
                height: 8px;
                border-right: 2px solid rgba(255,255,255,0.95);
                border-bottom: 2px solid rgba(255,255,255,0.95);
                transform: rotate(45deg);
                margin-top: 6px;
                animation: scroll-bounce 1.6s infinite;
            }
            @keyframes scroll-bounce {
                0% { transform: translateY(0) rotate(45deg); opacity: 0.9 }
                50% { transform: translateY(10px) rotate(45deg); opacity: 1 }
                100% { transform: translateY(0) rotate(45deg); opacity: 0.9 }
            }

            /* Corner project link */
            .corner-link {
                position: absolute;
                top: 22px;
                right: 22px;
                display: inline-flex;
                gap: 10px;
                align-items: center;
                padding: 10px 14px;
                border-radius: 999px;
                color: white;
                text-decoration: none;
                background: rgba(255,255,255,0.02);
                border: 1px solid rgba(255,255,255,0.08);
                backdrop-filter: blur(8px) saturate(120%);
                box-shadow: 0 6px 24px rgba(0,0,0,0.45);
                transition: transform 180ms ease, box-shadow 180ms ease, background 180ms ease;
                pointer-events: auto;
            }
            .corner-link:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 12px 40px rgba(0,0,0,0.55); }
            .corner-link .icon {
                width: 20px;
                height: 20px;
                display: inline-block;
                flex: 0 0 20px;
            }
            .corner-link .text { font-size: 0.9rem; font-weight: 600; letter-spacing: 0.04em; }

            

            /* Main content that scrolls beneath the hero */
            main.content {
                position: relative;
                z-index: 2;
                background: transparent;
                color: #fff;
                -webkit-font-smoothing: antialiased;
                background: rgba(6,6,8,0.68);
                backdrop-filter: blur(8px) saturate(120%);
                /* backdrop-filter: blur(20px) saturate(120%) brightness(2); */
            }
            .projects {
                max-width: 1100px;
                margin: 0 auto;
                padding: 48px 20px 96px 20px;
            }
            .project {
                background: rgba(6,6,8,0.68);
                border-radius: 12px;
                padding: 22px;
                margin: 18px 0;
                box-shadow: 0 8px 24px rgba(0,0,0,0.45);
                border: 1px solid rgba(255,255,255,0.04);
                backdrop-filter: blur(8px) saturate(120%);
                color: #e9eef8;
            }
            .project h2 { margin: 0 0 8px 0; }
        </style>

    </head>
    <body>
        <canvas id="canvas"> </canvas>

        <section class="hero">
            <div class="overlay">
                <h1>BARKAI LAZIMY</h1>
                <p class="subtitle">Engineering Student | University of Wisconsin Madison</p>
                <a class="corner-link" href="#projects" title="See this canvas project">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <circle cx="12" cy="12" r="10" stroke="rgba(255,255,255,0.9)" stroke-width="1.2" fill="rgba(255,255,255,0.02)" />
                        <path d="M8 12l2.5 2.5L16 9" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none" opacity="0.95"/>
                    </svg>
                    <span class="text">See this project</span>
                </a>
                <div class="scroll-indicator" aria-hidden="true"><span class="arrow"></span></div>
            </div>
        </section>

        <main class="content">
            <div class="projects">
                <section class="project">
                    <h2>Project One</h2>
                    <p>Short description of project one. Technologies used: WebGPU, JavaScript.</p>
                </section>
                <section class="project">
                    <h2>Project Two</h2>
                    <p>Short description of project two. Link, demo, and short notes go here.</p>
                </section>
                <section class="project">
                    <h2>Project Three</h2>
                    <p>Short description of project three. Add as many as you like.</p>
                </section>
            </div>
        </main>

        <script type="module">
            const canvas = document.getElementById('canvas');

            function setCanvasSquare() {
                const size = Math.max(window.innerWidth, window.innerHeight);
                canvas.width = size;
                canvas.height = size;
                canvas.style.width = size + 'px';
                canvas.style.height = size + 'px';
            }
            setCanvasSquare();
            window.addEventListener('resize', setCanvasSquare);

            async function useVideoFallback() {
                canvas.style.display = 'none';
                const video = document.createElement('video');
                video.id = 'fallbackVideo';
                video.src = './fallback.mp4';
                video.loop = true;
                video.muted = true;
                video.autoplay = true;
                video.playsInline = true;
                video.preload = 'auto';
                document.body.insertBefore(video, document.body.firstChild);
                try { await video.play(); } catch (e) { /* autoplay may be blocked */ }
            }

            async function initBackground() {
                const hasGPU = !!navigator.gpu;
                if (!hasGPU) {
                    await useVideoFallback();
                    return;
                }

                try {
                    const adapter = await navigator.gpu.requestAdapter();
                    if (!adapter) { await useVideoFallback(); return; }
                } catch (e) {
                    await useVideoFallback();
                    return;
                }

                try {
                    const mod = await import('https://bitarmada.github.io/webgpunet/background.js');
                    const createBackground = mod.default || mod;
                    const stuff = await createBackground(canvas, 400);
                    stuff.update();

                    function loop(){
                        stuff.update();
                        requestAnimationFrame(loop);
                    }
                    loop();

                    await stuff.activate(200,300,1);
                    setInterval(async () => {
                        stuff.activate(200,300,1)
                    }, 1000)
                } catch (e) {
                    console.warn('WebGPU background failed, falling back to video', e);
                    await useVideoFallback();
                }
            }

            initBackground();
            </script>
    
                <!--
                    Development helper: saveFramesDev(stuff, { start, end, fps })
                    - Commented out by default. Uncomment to use.
                    - Pass the `stuff` background instance returned by `createBackground`.
                    - Example: await saveFramesDev(stuff, { start:0, end:300, fps:60 });

                <script>
                /*
                async function saveFramesDev(stuff, { start = 0, end = 3600, fps = 60 } = {}) {
                    if (!stuff) {
                        console.warn('saveFramesDev: missing `stuff` background instance');
                        return;
                    }
                    const canvas = document.getElementById('canvas');

                    function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

                    async function renderFrame(t) {
                        // If your `stuff` exposes a time-based update, pass t if supported.
                        if (typeof stuff.update === 'function') await stuff.update(t);
                        else await stuff.update();
                    }

                    async function saveFrame(i) {
                        const t = i / fps;
                        await renderFrame(t);

                        // ensure the browser composited the latest frame
                        await new Promise(r => requestAnimationFrame(r));
                        await sleep(0);

                        const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));
                        if (!blob) return;

                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `frame_${String(i).padStart(5, '0')}.png`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);

                        // give the browser a moment to process downloads
                        await sleep(120);
                    }

                    for (let i = start; i < end; i++) {
                        // eslint-disable-next-line no-await-in-loop
                        await saveFrame(i);
                    }
                }
                */
                </script> -->

    </body>
</html>