<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>

        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

        <style>
            html, body { height: 100%; margin: 0; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: #050507; }
            /* Canvas sits fixed as a background layer */
            canvas {
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                display: block;
                z-index: 0;
            }
            /* Fallback video (created dynamically only when needed) */
            video#fallbackVideo {
                position: fixed;
                inset: 0;
                width: 100vw;
                height: 100vh;
                object-fit: cover;
                z-index: 0;
                image-rendering: pixelated;
                image-rendering: crisp-edges;
                -ms-interpolation-mode: nearest-neighbor;
                background: #000;
            }

            /* Hero area that occupies the first viewport */
            .hero {
                position: relative;
                height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1;
            }

            /* Overlay content centered inside the hero only */
            .overlay {
                position: absolute;
                inset: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
                color: white;
                -webkit-font-smoothing: antialiased;
                pointer-events: none;
            }
            .overlay h1, .overlay p { pointer-events: auto; margin: 0.25rem 0;}
            .overlay h1 {
                font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
                /* font-weight: 800; */
                font-weight: 300;
                font-size: clamp(2.25rem, 6vw, 4rem);
                /* letter-spacing: 0.06em; */
                letter-spacing: 0.30em;
                margin-bottom: 8px;
                text-transform: none;
                /* color: white; */
                /* move blend to overlay container for reliability */
                /* mix-blend-mode: color-dodge; */
                -webkit-font-smoothing: antialiased;
                text-shadow: none;
            }
            /* Apply blending at the overlay level so text inverts the canvas below */
            .overlay { mix-blend-mode: difference; }
            .overlay p { font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif; font-size: 1.1rem; opacity: 0.95; }

            /* Scroll indicator */
            .scroll-indicator {
                position: absolute;
                left: 50%;
                bottom: 28px;
                transform: translateX(-50%);
                width: 36px;
                height: 56px;
                border-radius: 24px;
                border: 2px solid rgba(255,255,255,0.85);
                display: flex;
                align-items: flex-start;
                justify-content: center;
                padding-top: 8px;
                box-sizing: border-box;
                opacity: 0.95;
                pointer-events: none;
            }
            .scroll-indicator .arrow {
                width: 8px;
                height: 8px;
                border-right: 2px solid rgba(255,255,255,0.95);
                border-bottom: 2px solid rgba(255,255,255,0.95);
                transform: rotate(45deg);
                margin-top: 6px;
                animation: scroll-bounce 1.6s infinite;
            }
            @keyframes scroll-bounce {
                0% { transform: translateY(0) rotate(45deg); opacity: 0.9 }
                50% { transform: translateY(10px) rotate(45deg); opacity: 1 }
                100% { transform: translateY(0) rotate(45deg); opacity: 0.9 }
            }

            /* Corner project link */
            .corner-link {
                position: absolute;
                top: 22px;
                right: 22px;
                display: inline-flex;
                gap: 10px;
                align-items: center;
                padding: 10px 14px;
                border-radius: 999px;
                color: white;
                text-decoration: none;
                background: rgba(255,255,255,0.02);
                border: 1px solid rgba(255,255,255,0.08);
                backdrop-filter: blur(8px) saturate(120%);
                box-shadow: 0 6px 24px rgba(0,0,0,0.45);
                transition: transform 180ms ease, box-shadow 180ms ease, background 180ms ease;
                pointer-events: auto;
            }
            .corner-link:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 12px 40px rgba(0,0,0,0.55); }
            .corner-link .icon {
                width: 20px;
                height: 20px;
                display: inline-block;
                flex: 0 0 20px;
            }
            .corner-link .text { font-size: 0.9rem; font-weight: 600; letter-spacing: 0.04em; }

            

            /* Main content that scrolls beneath the hero */
            main.content {
                position: relative;
                z-index: 2;
                background: transparent;
                color: #fff;
                -webkit-font-smoothing: antialiased;
                background: rgba(6,6,8,0.68);
                backdrop-filter: blur(8px) saturate(120%);
                /* backdrop-filter: blur(20px) saturate(120%) brightness(2); */
            }
            .projects {
                max-width: 1100px;
                margin: 0 auto;
                padding: 48px 20px 96px 20px;
                display: grid;
                gap: 20px;
            }

            /* Base project card */
            .project {
                background: rgba(6,6,8,0.52);
                border-radius: 12px;
                padding: 20px;
                margin: 0;
                box-shadow: 0 8px 30px rgba(0,0,0,0.5);
                border: 1px solid rgba(255,255,255,0.04);
                backdrop-filter: blur(8px) saturate(120%);
                color: #e9eef8;
                overflow: hidden;
            }
            .project h2 { margin: 0 0 8px 0; font-size: 1.4rem; }
            .project .meta { font-size: 0.95rem; color: rgba(233,238,248,0.85); margin-bottom: 12px; }
            .project .project-grid { display: grid; gap: 16px; align-items: center; }

            /* Layout variants */
            .project.layout-left .project-grid { grid-template-columns: 1fr 1.25fr; }
            .project.layout-right .project-grid { grid-template-columns: 1.25fr 1fr; }
            .project.layout-full .project-grid { grid-template-columns: 1fr; }
            .project.layout-gallery .project-grid { grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); }

            .project .media { width: 100%; height: 100%; display:block; border-radius: 8px; overflow:hidden; }
            .project .media img { width:100%; height:100%; object-fit:cover; display:block; }

            .project .content { padding: 4px 6px; }
            .project p { margin: 0 0 12px 0; color: rgba(233,238,248,0.88); line-height: 1.5; }

            .project .buttons { display:flex; gap:10px; flex-wrap:wrap; }
            .btn { background: transparent; border: 1px solid rgba(255,255,255,0.12); color: #fff; padding: 8px 12px; border-radius:8px; text-decoration:none; font-weight:600; font-size:0.92rem; transition: transform .12s ease, background .12s ease; }
            .btn:hover { transform: translateY(-3px); background: rgba(255,255,255,0.04); }
            .btn.primary { background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); border-color: rgba(255,255,255,0.14); }

            /* Responsive adjustments */
            @media (max-width: 880px) {
                .project.layout-left .project-grid,
                .project.layout-right .project-grid { grid-template-columns: 1fr; }
                .project { padding: 16px; }
            }
        </style>

    </head>
    <body>
        <canvas id="canvas"> </canvas>

        <section class="hero">
            <div class="overlay">
                <h1>BARKAI LAZIMY</h1>
                <p class="subtitle">Engineering Student | University of Wisconsin Madison</p>
                <a class="corner-link" href="#projects" title="See this canvas project">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <circle cx="12" cy="12" r="10" stroke="rgba(255,255,255,0.9)" stroke-width="1.2" fill="rgba(255,255,255,0.02)" />
                        <path d="M8 12l2.5 2.5L16 9" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none" opacity="0.95"/>
                    </svg>
                    <span class="text">See this project</span>
                </a>
                <div class="scroll-indicator" aria-hidden="true"><span class="arrow"></span></div>
            </div>
        </section>

        <main class="content">
            <div class="projects" id="projects">
                <!-- Card: image left, text right -->
                <section class="project layout-left">
                    <div class="project-grid">
                        <div class="media"><img src="https://via.placeholder.com/720x480.png?text=Project+1+Image" alt="Project 1 screenshot"></div>
                        <div class="content">
                            <h2>Interactive WebGPU</h2>
                            <div class="meta">WebGPU · GLSL · JavaScript</div>
                            <p>A real-time procedural background and interactive demo showcasing GPU-driven particles and shading. Includes adjustable parameters and performance tuning.</p>
                            <div class="buttons">
                                <a class="btn" href="#" target="_blank">GitHub</a>
                                <a class="btn primary" href="#" target="_blank">Live Demo</a>
                                <a class="btn" href="#">Learn more</a>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Card: image right, text left -->
                <section class="project layout-right">
                    <div class="project-grid">
                        <div class="content">
                            <h2>Data Viz Dashboard</h2>
                            <div class="meta">React · D3 · Accessible</div>
                            <p>A responsive dashboard with rich, interactive visualizations. Multiple views, exportable CSVs, and accessible controls for keyboard users.</p>
                            <div class="buttons">
                                <a class="btn" href="#">Source</a>
                                <a class="btn primary" href="#">Open Site</a>
                                <a class="btn" href="#">Learn more</a>
                            </div>
                        </div>
                        <div class="media"><img src="https://via.placeholder.com/720x480.png?text=Project+2+Image" alt="Project 2 screenshot"></div>
                    </div>
                </section>

                <!-- Card: gallery layout -->
                <section class="project layout-gallery">
                    <div class="project-grid">
                        <div class="media"><img src="https://via.placeholder.com/600x400.png?text=Gallery+1" alt="Gallery 1"></div>
                        <div class="media"><img src="https://via.placeholder.com/600x400.png?text=Gallery+2" alt="Gallery 2"></div>
                        <div class="media"><img src="https://via.placeholder.com/600x400.png?text=Gallery+3" alt="Gallery 3"></div>
                        <div class="content">
                            <h2>Armor Optimization</h2>
                            <div class="meta">CSS · Web Animations</div>
                            <p></p>
                            <div class="buttons">
                                <a class="btn" href="#">GitHub</a>
                                <a class="btn primary" href="#">Playground</a>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Card: full-bleed background image with overlay text -->
                <section class="project layout-full">
                    <div class="project-grid">
                        <div class="media" style="">
                            <img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXeC9Zvhrs2Ge61SOEEwa4shth51Vo3M6T_iLhxSoP7V2tcYRNIUVFWISqgOeAJiLxq5ok6IIFU2nRbJ9U4YbHMvkQE7oCJw0syaFnF0ZT7v3wNYNqJm1oi0dXPmufHC4shCRrrMxA?key=KHrMDpzEVaq71VAq6JfwoA" alt="Project hero image">
                        </div>
                        <div class="content">
                            <h2>Security System with Real-Time Gun Detection using Computer Vision</h2>
                            <div class="meta">Design · Frontend</div>
                            <p>A showcase page with rich media and product highlights. Designed to be clean, readable, and fast-loading across devices.</p>
                            <div class="buttons">
                                <a class="btn" href="#">Case Study</a>
                                <a class="btn primary" href="#">View Site</a>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <script type="module">
            const canvas = document.getElementById('canvas');

            function setCanvasSquare() {
                const size = Math.max(window.innerWidth, window.innerHeight);
                canvas.width = size;
                canvas.height = size;
                canvas.style.width = size + 'px';
                canvas.style.height = size + 'px';
            }
            setCanvasSquare();
            window.addEventListener('resize', setCanvasSquare);

            async function useVideoFallback() {
                // We'll draw the video onto the main canvas using nearest-neighbor scaling
                // so pixels remain crisp immediately.
                const video = document.createElement('video');
                video.id = 'fallbackVideo';
                video.src = './fallback.mp4';
                video.loop = true;
                video.muted = true;
                video.autoplay = true;
                video.playsInline = true;
                video.preload = 'auto';
                // keep the video element offscreen/hidden - we draw from it into the canvas
                video.style.position = 'absolute';
                video.style.left = '-9999px';
                video.style.width = '400px';
                video.style.height = '400px';
                document.body.appendChild(video);

                // make sure canvas is visible and sized to viewport
                canvas.style.display = 'block';
                canvas.style.position = 'fixed';
                canvas.style.top = '0';
                canvas.style.left = '0';
                canvas.style.width = '100vw';
                canvas.style.height = '100vh';
                canvas.style.zIndex = '0';
                // hint for crisp rendering
                canvas.style.imageRendering = 'pixelated';

                const ctx = canvas.getContext('2d');
                ctx.imageSmoothingEnabled = false;

                function resizeDrawCanvas() {
                    const dpr = window.devicePixelRatio || 1;
                    const w = Math.max(1, Math.round(window.innerWidth));
                    const h = Math.max(1, Math.round(window.innerHeight));
                    canvas.width = Math.round(w * dpr);
                    canvas.height = Math.round(h * dpr);
                    canvas.style.width = w + 'px';
                    canvas.style.height = h + 'px';
                    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
                    ctx.imageSmoothingEnabled = false;
                }

                resizeDrawCanvas();
                window.addEventListener('resize', resizeDrawCanvas);

                // start drawing once we have metadata (video dimensions)
                video.addEventListener('loadedmetadata', () => {
                    // ensure playback
                    try { video.play(); } catch (_) {}

                    function draw() {
                        // compute a cover scale (fill) while keeping integer-ish sizes for crisper pixels
                        const vw = video.videoWidth || 400;
                        const vh = video.videoHeight || 400;
                        const cw = canvas.width / (window.devicePixelRatio || 1);
                        const ch = canvas.height / (window.devicePixelRatio || 1);

                        const scale = Math.max(cw / vw, ch / vh);
                        // aim for integer pixel scaling when possible
                        const drawW = Math.round(vw * scale);
                        const drawH = Math.round(vh * scale);
                        const dx = Math.round((cw - drawW) / 2);
                        const dy = Math.round((ch - drawH) / 2);

                        ctx.clearRect(0, 0, cw, ch);
                        ctx.imageSmoothingEnabled = false;
                        try {
                            ctx.drawImage(video, 0, 0, vw, vh, dx, dy, drawW, drawH);
                        } catch (e) {
                            // drawing might fail if video not ready; ignore and continue
                        }
                        requestAnimationFrame(draw);
                    }

                    draw();
                }, { once: true });

                // attempt to play in case metadata already loaded
                try { await video.play(); } catch (_) {}
            }

            async function initBackground() {
                const hasGPU = false;//!!navigator.gpu;
                if (!hasGPU) {
                    await useVideoFallback();
                    return;
                }

                try {
                    const adapter = await navigator.gpu.requestAdapter();
                    if (!adapter) { await useVideoFallback(); return; }
                } catch (e) {
                    await useVideoFallback();
                    return;
                }

                try {
                    const mod = await import('https://bitarmada.github.io/webgpunet/background.js');
                    const createBackground = mod.default || mod;
                    const stuff = await createBackground(canvas, 400);
                    stuff.update();

                    function loop(){
                        stuff.update();
                        requestAnimationFrame(loop);
                    }
                    loop();

                    await stuff.activate(200,300,1);
                    setInterval(async () => {
                        stuff.activate(200,300,1)
                    }, 1000)
                } catch (e) {
                    console.warn('WebGPU background failed, falling back to video', e);
                    await useVideoFallback();
                }
            }

            initBackground();
            </script>
    
                <!--
                    Development helper: saveFramesDev(stuff, { start, end, fps })
                    - Commented out by default. Uncomment to use.
                    - Pass the `stuff` background instance returned by `createBackground`.
                    - Example: await saveFramesDev(stuff, { start:0, end:300, fps:60 });

                <script>
                /*
                async function saveFramesDev(stuff, { start = 0, end = 3600, fps = 60 } = {}) {
                    if (!stuff) {
                        console.warn('saveFramesDev: missing `stuff` background instance');
                        return;
                    }
                    const canvas = document.getElementById('canvas');

                    function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }

                    async function renderFrame(t) {
                        // If your `stuff` exposes a time-based update, pass t if supported.
                        if (typeof stuff.update === 'function') await stuff.update(t);
                        else await stuff.update();
                    }

                    async function saveFrame(i) {
                        const t = i / fps;
                        await renderFrame(t);

                        // ensure the browser composited the latest frame
                        await new Promise(r => requestAnimationFrame(r));
                        await sleep(0);

                        const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));
                        if (!blob) return;

                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `frame_${String(i).padStart(5, '0')}.png`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);

                        // give the browser a moment to process downloads
                        await sleep(120);
                    }

                    for (let i = start; i < end; i++) {
                        // eslint-disable-next-line no-await-in-loop
                        await saveFrame(i);
                    }
                }
                */
                </script> -->

    </body>
</html>